<!DOCTYPE html>

<html lang="fr">
<head>
<!--
    Ce fichier HTML fait partie du site d'Ana Ruiz.
    Structure, navigation, et fonctionnalités sont expliquées par des commentaires dans le code.
    Tout est responsive, accessible et moderne. Voir README.md pour plus de détails.
  -->
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>La maison ou le pouvoir de rentrer en soi-même (2012) - Ana Ruiz</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;700&amp;family=Playfair+Display:wght@700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&amp;display=swap" rel="stylesheet"/>
<link href="css/style-modern.css" rel="stylesheet"/>
<style>
    body { background: #151516 !important; }
    .gallery-page {
      max-width: 1000px;
      margin: 0 auto 3rem auto;
      padding: 0 1vw;
      /* espace au-dessus calculé à partir de la hauteur réelle de la navbar */
      margin-top: calc(var(--site-nav-offset) + 0.8rem);
    }
    .gallery-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      margin-bottom: 0.5em;
      color: #f4efe9;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-align: center;
      line-height: 1.25;
    }
    .gallery-desc {
      color: #cec9c4;
      font-size: 1.09rem;
      margin: 0 auto 1.2rem auto; /* espace supplémentaire sous la phrase */
      max-width: 880px;           /* limite largeur et évite débordement */
      text-align: center;
      font-style: italic;
      cursor: pointer;
      position: relative;
      outline: none;
      display: block;             /* bloc plein, empêche chevauchement */
      padding: .45rem .9rem;
      border-radius: 10px;
      background: rgba(255,255,255,0.02);
      transition: background .18s, transform .12s;
      -webkit-appearance: none;
      text-decoration: none;
      line-height:1.3;
      touch-action: manipulation; /* priorité aux taps, évite gestures indésirables */
      -webkit-tap-highlight-color: transparent;
      z-index: 40; /* au-dessus d'éléments éventuels */
    }
    /* indicateur placé après le texte, non absolu (ne force pas débordement) */
    .gallery-desc::after {
      content: " ▾ En savoir plus";
      display: inline-block;
      margin-left: .45rem;
      font-size: 0.88rem;
      color: #bfb6ad;
      opacity: 0.95;
      pointer-events: none;
      white-space: nowrap;
    }
    /* petite amélioration visuelle pour montrer que c'est cliquable */
    .gallery-desc:hover,
    .gallery-desc:focus {
      background: rgba(255,255,255,0.045);
      transform: translateY(-1px);
      outline: 2px solid rgba(255,255,255,0.05);
    }
    /* si malgré tout il reste du texte posé sous la phrase, forcer séparation */
    .gallery-works { margin-top: 0.8rem; }

    /* Bloc étendu : fond, ombre et priorité d'affichage */
    .expanded-text {
      position: relative;
      z-index: 30;                    /* au-dessus des éléments fixes */
      background: rgba(20,20,22,0.96);/* fond opaque pour éviter superposition visuelle */
      border-radius: 12px;
      padding: 1rem .9rem;
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);
      overflow: hidden;
      color: #d7d2cf;
      text-align: justify;
      margin: 0 auto;
      max-width: 780px;
      box-sizing: border-box;
      display: none;                  /* caché par défaut de façon sûre */
      opacity: 0;
      transform-origin: top center;
      transform: translateY(-6px);
      transition: opacity 0.26s ease, transform 0.26s ease;
    }
    .expanded-text.open {
      display: block;                 /* rendu visible quand on ouvre */
      opacity: 1;
      transform: translateY(0);
      margin-top: 1rem;
    }

    /* bouton Fermer */
    .expanded-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255,255,255,0.04);
      border: 0;
      color: #ece3de;
      padding: .18rem .5rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.95rem;
      display: none;
    }
    .expanded-text.open .expanded-close { display: block; }
    .gallery-works {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 2em 2em;
      margin-bottom: 2em;
    }
    .gallery-work {
      background: rgba(38,37,41,0.12);
      border-radius: 16px;
      box-shadow: 0 2px 14px #19171b18;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: box-shadow 0.16s;
    }
    .gallery-work img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      background: #222226;
      display: block;
    }
    .gallery-work-title {
      margin: 1em 0 0.6em 0;
      color: #f4efe9;
      font-family: 'Playfair Display', serif;
      font-size: 1.09rem;
      font-weight: 700;
      letter-spacing: 0.2px;
      text-align: center;
    }
    .gallery-work-desc {
      color: #c7c7c7;
      font-size: 0.99rem;
      text-align: center;
      margin-bottom: 1em;
    }
    .gallery-citation {
      margin: 2.5em auto 1.5em auto;
      color: #a7a2b6;
      background: rgba(44,44,48,0.18);
      border-left: 3px solid #8b858c;
      font-style: italic;
      font-size: 1.07rem;
      padding: 1em 1.3em;
      max-width: 650px;
      border-radius: 10px;
      box-shadow: 0 2px 14px #19171b18;
    }
    .gallery-back {
      display: flex;
      justify-content: center;
      margin-top: 2.5em;
    }
    .gallery-back a {
      font-size: 1rem;
      color: #968a7f;
      text-decoration: none;
      background: rgba(238, 233, 222, 0.12);
      padding: 0.7em 1.5em;
      border-radius: 18px;
      transition: background 0.14s, color 0.14s;
      box-shadow: 0 2px 9px #18101421;
    }
    .gallery-back a:hover {
      background: rgba(238, 233, 222, 0.22);
      color: #b3a797;
    }
    @media (max-width: 600px) {
      .gallery-title { font-size: 1.3rem;}
      .gallery-works { grid-template-columns: 1fr;}
      .gallery-work img { height: 180px;}
    }


    /* Eviter que la barre chevauche le contenu : garde compatibilité */
-  .gallery-page { margin-top: calc(5rem + 0.8rem); } /* ajuste si nécessaire */
+  /* la variable CSS --site-nav-offset garantit que le contenu commence sous la navbar */
+  .gallery-page { margin-top: calc(var(--site-nav-offset) + 0.8rem); } /* ajustable si nécessaire */

    /* signature auteur : police manuscrite */
    .author-signature {
      font-family: "Great Vibes", cursive;
      font-size: 1.6rem;                 /* un peu plus grand pour la lisibilité */
      color: #e6dccf;
      display: inline-block;
      margin-top: .45rem;
      line-height: 1;
      letter-spacing: 0.8px;             /* espacement entre caractères */
      word-spacing: 0.5rem;              /* espace entre les mots/parties du nom */
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
    }
    .author-signature .sig-part { display:inline-block; }
    .author-signature .sig-sep { width:.5rem; display:inline-block; }

    /* Styles pour le texte étendu */
    .expanded-text p {
      text-align: justify;
      text-justify: inter-word;
      -webkit-hyphens: auto;
      -ms-hyphens: auto;
      hyphens: auto;
      margin: 0 0 1rem;
      line-height: 1.7;
      color: #d7d2cf;
      font-size: 1rem;
    }
    .expanded-text blockquote {
      font-style: italic;
      margin: 1rem 0;
      color: #e6dccf;
      border-left: 3px solid rgba(255,255,255,0.04);
      padding-left: 1rem;
    }
    .expanded-text .source {
      text-align: right;
      font-style: italic;
      color: #bfb6ad;
      margin-top: 0.6rem;
      font-size: 0.95rem;
    }

    /* Lightbox fullscreen (affiche l'image entière, pas de crop) */
    .lightbox-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(2,2,4,0.92);
      z-index: 1100;
      opacity: 0;
      pointer-events: none;
      transition: opacity .22s ease;
    }
    .lightbox-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }
    .lightbox-inner {
      width: 100%;
      height: 100%;
      max-width: 100vw;
      max-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .lightbox-inner img {
      max-width: calc(100vw - 40px);
      max-height: calc(100vh - 40px);
      width: auto;
      height: auto;
      object-fit: contain; /* garantit que l'image apparaisse entière */
      display: block;
      /* enlever arrondi pour respecter l'image entière et éviter artefacts */
      border-radius: 0;
      box-shadow: 0 18px 50px rgba(0,0,0,0.6);
      outline: none;
      -webkit-tap-highlight-color: transparent;
    }
    /* Focus styling : retirer le rectangle natif (bleu) et proposer un anneau discret */
    .lightbox-close:focus,
    .lightbox-inner img:focus,
    #lightbox-close:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(255,255,255,0.06);
      border-radius: 6px;
    }
    /* ne pas laisser la miniature afficher le focus natif bleu */
    .gallery-work img { outline: none; -webkit-tap-highlight-color: transparent; }
    .gallery-work img:focus { box-shadow: 0 0 0 3px rgba(255,255,255,0.04); border-radius:4px; }

    .lightbox-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(255,255,255,0.06);
      border: 0;
      color: #f4efe9;
      padding: .35rem .5rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      backdrop-filter: blur(2px);
    }
    .lightbox-caption {
      margin-top: .6rem;
      color: #cfc6bd;
      font-size: .95rem;
      text-align: center;
    }
    @media (max-width:600px){
      .lightbox-close{ top:8px; right:8px; font-size:.95rem; padding:.3rem .45rem;}
    }
  </style>
<script defer="" src="js/navbar-load.js"></script>
<style>
.nav-logo a {
  font-size: 1.05rem;
  font-weight: 700;
  white-space: nowrap;
}
.nav-signature { display:inline-block; margin-left:.4rem; height:22px; }

/* Navigation links (desktop) */
.nav-links {
  display: flex;
  gap: 1rem;
  margin-left: auto;
  align-items: center;
}
.nav-links a {
  display: inline-block;
  padding: .6rem .7rem;
  font-size: 0.98rem;
  line-height: 1;
  color: inherit;
  text-decoration: none;
  border-radius: .35rem;
}

/* visual breathing room for navbar on large screens */
@media (min-width: 1200px) {
  .navbar { padding: 1.2rem 0; }
  .nav-links a { padding: .7rem .9rem; font-size: 1rem; }
}

/* --- Mobile: adapter mais garder la barre plus haute proportionnellement --- */
@media (max-width: 840px){
  .navbar { padding: 0.8rem 0.6rem; }
  .navbar-container { gap: .6rem; padding: 0 0.6rem; }

  /* limiter la largeur du texte du logo mais le garder lisible */
  .nav-logo a {
    font-size: 0.88rem;
    font-weight:700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 160px;
    display: inline-block;
    vertical-align: middle;
  }

  /* signature réduite pour mobile */
  .nav-signature{display:block; height:18px; width:auto; margin-left:.25rem; opacity:.95}
  .nav-signature img{height:18px; width:auto; display:block; opacity:.95}

  /* hamburger un peu plus grand pour confort tactile */
  .hamburger{
    margin-left:auto;
    width:42px;
    height:36px;
    padding:0;
    display:grid;
    place-items:center;
    font-size:1rem;
    line-height:1;
    border-radius:.5rem;
  }

  /* Menu mobile: colonne, plein largeur mais discret */
  .nav-links{
    display:none;
    flex-direction:column;
    align-items:center;
    text-align:center;
    gap:0.12rem;
    padding:0.35rem 0;
    width:100%;
  }
  .nav-links.open{display:flex}

  .nav-links li { margin:0; width:100%; }
  .nav-links a{
    display:block;
    padding:.44rem 0;
    font-size:0.92rem;
    line-height:1.15;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    width:100%;
  }

  /* très petits écrans : compacter encore légèrement */
  @media (max-width: 380px) {
    .nav-logo a { max-width: 120px; font-size:0.8rem; }
    .nav-links a { font-size:0.82rem; padding:.28rem 0; }
    .hamburger { width:38px; height:32px; font-size:0.9rem; }
  }
}
</style><style>
.nav-logo a {
  font-size: 1.05rem;
  font-weight: 700;
  white-space: nowrap;
}
.nav-signature { display:inline-block; margin-left:.4rem; height:22px; }

/* Navigation links (desktop) */
.nav-links {
  display: flex;
  gap: 1rem;
  margin-left: auto;
  align-items: center;
}
.nav-links a {
  display: inline-block;
  padding: .6rem .7rem;
  font-size: 0.98rem;
  line-height: 1;
  color: inherit;
  text-decoration: none;
  border-radius: .35rem;
}

/* visual breathing room for navbar on large screens */
@media (min-width: 1200px) {
  .navbar { padding: 1.2rem 0; }
  .nav-links a { padding: .7rem .9rem; font-size: 1rem; }
}

/* --- Mobile: adapter mais garder la barre plus haute proportionnellement --- */
@media (max-width: 840px){
  .navbar { padding: 0.8rem 0.6rem; }
  .navbar-container { gap: .6rem; padding: 0 0.6rem; }

  /* limiter la largeur du texte du logo mais le garder lisible */
  .nav-logo a {
    font-size: 0.88rem;
    font-weight:700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 160px;
    display: inline-block;
    vertical-align: middle;
  }

  /* signature réduite pour mobile */
  .nav-signature{display:block; height:18px; width:auto; margin-left:.25rem; opacity:.95}
  .nav-signature img{height:18px; width:auto; display:block; opacity:.95}

  /* hamburger un peu plus grand pour confort tactile */
  .hamburger{
    margin-left:auto;
    width:42px;
    height:36px;
    padding:0;
    display:grid;
    place-items:center;
    font-size:1rem;
    line-height:1;
    border-radius:.5rem;
  }

  /* Menu mobile: colonne, plein largeur mais discret */
  .nav-links{
    display:none;
    flex-direction:column;
    align-items:center;
    text-align:center;
    gap:0.12rem;
    padding:0.35rem 0;
    width:100%;
  }
  .nav-links.open{display:flex}

  .nav-links li { margin:0; width:100%; }
  .nav-links a{
    display:block;
    padding:.44rem 0;
    font-size:0.92rem;
    line-height:1.15;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    width:100%;
  }

  /* très petits écrans : compacter encore légèrement */
  @media (max-width: 380px) {
    .nav-logo a { max-width: 120px; font-size:0.8rem; }
    .nav-links a { font-size:0.82rem; padding:.28rem 0; }
    .hamburger { width:38px; height:32px; font-size:0.9rem; }
  }
}
</style></head>
<body>
<!-- ===== Barre de navigation principale ===== -->
<nav class="navbar">
<div class="navbar-container">
<div class="nav-logo">
<a href="index.html">Ana Ruiz</a>
<img alt="Signature Ana Ruiz" class="nav-signature" src="img/signature.png"/>
</div>
<button aria-label="Ouvrir le menu" class="hamburger" id="menu-toggle">☰</button>
<ul class="nav-links">
<li><a href="index.html">Accueil</a></li>
<li><a href="galeries.html">Galeries</a></li>
<li><a href="videos.html">Vidéos</a></li>
<li><a href="publications.html">Publications</a></li>
<li><a href="diaporama.html">Diaporama</a></li>
<li><a href="apropos.html">À propos</a></li>
<li><a href="contact.html">Contact</a></li>
</ul>
</div>
</nav>
<!-- ===== Contenu principal de la page ===== -->
<main>
<div class="gallery-page fade-in">
<div class="gallery-title">La maison ou le pouvoir de rentrer en soi-même (2012)</div>
<div aria-expanded="false" class="gallery-desc" id="gallery-desc" role="button" tabindex="0" title="Cliquer pour développer">
        La maison est-elle le reflet de notre personnalité qui se construit peu à peu au fil des ans ? Le geste transmis de génération en génération ? 
        Qui, de nous ou de la maison reflète l'autre ? Qui construit et protège l'autre ? 
        
      </div>
<!-- remplacer le contenu actuel de #gallery-desc-full par : -->
<div aria-hidden="true" class="expanded-text" id="gallery-desc-full">
<button aria-label="Fermer la description" class="expanded-close" id="gallery-desc-close">✕</button>
<p>
          Parce qu’elle est indissociablement matérielle et immatérielle — maison où l’on vit et maison que l’on porte au fond de soi — la maison nous habite autant que nous l’habitons. C’est pourquoi la perdre revient aussi à se perdre soi‑même : rester enfermé dehors et en dehors de soi, en exil, dépossédé de l’espace intime de vie et du pouvoir de rentrer en soi‑même, séparé de soi et des autres comme un fantôme hanté par la maison disparue.
        </p>
<p>
          Un vieux conte traditionnel nous enseigne comment, grâce à notre travail et pourvu que nous soyons prévoyants, nous n’aurons rien à craindre pour la sécurité de la maisonnée, car nous choisirons sagement entre la maison de paille et de ciment, capable de braver le souffle du loup qui peut aisément balayer la maison de paille et secouer fortement la maison de bois qu’elle finit par dégringoler. Mais le loup est devenu bien pire symbole des dangers qui menacent les foyers. Quelle sorte de maison pourra nous protéger, sans faillir, des tempêtes qui soufflent sur notre monde et qui, financièrement, précipitent dans la ruine des populations entières ? Le conte ne le dit pas.
        </p>
<p>
          Sur le fil qui relie entre elles toutes les maisons du monde avance opiniâtrement en vacillant une frêle silhouette. Serait‑ce un hidalgo funambule que la force d’un noble et généreux idéal empêche de tomber et pousse envers et contre tout à aller de l’avant ? Cherche‑t‑il, de maison en maison, une porte ouverte sur un autre monde où toute maison est le centre de l’univers et où aucune ne sera jamais détruite ? Nous marchons tous sur un fil et, de là‑haut, si nous regardons bien, si nous regardons penchés à la fenêtre du cœur,
        </p>
<p><em>Germinal Arcal Palacio</em></p>
<blockquote>
          « (…) toutes les maisons apparaissent comme des coques de bateaux joliment colorées sur la mer immense et bleue de l’univers. Fragiles, les petites voiles triangulaires et le mât pointé vers le ciel, elles disent en même temps notre enfermement et notre légèreté, notre gravité et notre vanité. »
        </blockquote>
<div class="source">(Lydia Devos, La Maison, Le Seuil)</div>
</div>
<div class="gallery-works">
<div class="gallery-work">
<img alt="Maison sacrée" data-large="img/la-maison/maison-sacree.jpg" src="img/la-maison/maison-sacree.jpg" tabindex="0"/>
<div class="gallery-work-title">Maison sacrée</div>
<div class="gallery-work-desc"></div>
</div>
<div class="gallery-work">
<img alt="Maison Floride" data-large="img/la-maison/maison-floride.jpg" src="img/la-maison/maison-floride.jpg" tabindex="0"/>
<div class="gallery-work-title">Maison Floride</div>
<div class="gallery-work-desc"></div>
</div>
<div class="gallery-work">
<img alt="Maison temple" data-large="img/maison-temple.jpg" src="img/maison-temple.jpg" tabindex="0"/>
<div class="gallery-work-title">Maison temple</div>
<div class="gallery-work-desc"></div>
</div>
<div class="gallery-work">
<img alt="Maison palais prison" data-large="img/maison-palais-prison.jpg" src="img/maison-palais-prison.jpg" tabindex="0"/>
<div class="gallery-work-title">Maison palais prison</div>
<div class="gallery-work-desc"></div>
</div>
<!-- Ajoute autant d’œuvres que dans la page initiale, en gardant cette structure -->
</div>
<div class="gallery-citation">
        « Rentrer dans la maison, c’est peut-être rentrer en soi-même… »
      </div>
<div class="gallery-back">
<a href="galeries.html">← Retour aux galeries</a>
</div>
</div>
</main>
<!-- ===== Pied de page commun à tout le site ===== -->
<footer>
<p>© 2025 Ana Ruiz. Tous droits réservés. | <a href="mentions-legales.html">Mentions légales</a></p>
</footer>
<!-- ===== Scripts spécifiques à la page ===== -->
<script>

    document.addEventListener("DOMContentLoaded", function() {
      // fade-in
      document.querySelectorAll('.fade-in').forEach(function(el) { el.classList.add('visible'); });

      // menu toggle (mobile) : gère .open et .show, aria, fermeture au clic hors menu et au resize
      (function(){
        var menuBtn = document.getElementById('menu-toggle');
        var nav = document.querySelector('.nav-links');
        if (!menuBtn || !nav) return;
        menuBtn.setAttribute('aria-expanded','false');

        function closeNav() {
          nav.classList.remove('open');
          nav.classList.remove('show');
          menuBtn.setAttribute('aria-expanded','false');
          document.body.classList.remove('menu-open');
        }
        function openNav() {
          nav.classList.add('open');
          nav.classList.add('show');
          menuBtn.setAttribute('aria-expanded','true');
          document.body.classList.add('menu-open');
        }
        menuBtn.addEventListener('click', function(e){
          e.stopPropagation();
          if (nav.classList.contains('open') || nav.classList.contains('show')) closeNav(); else openNav();
        });
        // fermer si on clique en dehors du menu (utile en mobile)
        document.addEventListener('click', function(e){
          if (window.matchMedia('(max-width:840px)').matches) {
            if (nav.classList.contains('open') && !nav.contains(e.target) && e.target !== menuBtn) closeNav();
          }
        });
        // fermer au redimensionnement si on passe en desktop pour éviter état incohérent
        window.addEventListener('resize', function(){
          if (!window.matchMedia('(max-width:840px)').matches) {
            // sur desktop, laisser le nav visible via CSS ; retire les classes mobile
            nav.classList.remove('open');
            nav.classList.remove('show');
            menuBtn.setAttribute('aria-expanded','false');
            document.body.classList.remove('menu-open');
          } else {
            // petite sécurité : masquer par défaut quand on revient en mobile
            nav.classList.remove('open');
            nav.classList.remove('show');
            menuBtn.setAttribute('aria-expanded','false');
            document.body.classList.remove('menu-open');
          }
        });
      })();
     });
  </script>
<div aria-hidden="true" aria-modal="true" class="lightbox-overlay" id="lightbox" role="dialog">
<div class="lightbox-inner" role="document">
<button aria-label="Fermer la vue plein écran" class="lightbox-close" id="lightbox-close">✕</button>
<div class="lightbox-content">
<img alt="" id="lightbox-img" src=""/>
<div aria-hidden="true" class="lightbox-caption" id="lightbox-caption"></div>
</div>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function(){
  var imgs = document.querySelectorAll('.gallery-work img');
  var lightbox = document.getElementById('lightbox');
  var lbImg = document.getElementById('lightbox-img');
  var lbCaption = document.getElementById('lightbox-caption');
  var lbClose = document.getElementById('lightbox-close');

  var suppressOpen = false; // empêche réouverture immédiate après fermeture

  if (!lightbox || !lbImg) return;

  function openLightbox(src, alt){
    if (suppressOpen) return; // bloquer réouverture temporaire
    lbImg.src = src;
    lbImg.alt = alt || '';
    lbCaption.textContent = alt || '';
    lbCaption.setAttribute('aria-hidden', alt ? 'false' : 'true');
    document.documentElement.setAttribute('data-lightbox-open','true');
    document.body.style.overflow = 'hidden';
    lightbox.classList.add('open');
    lightbox.setAttribute('aria-hidden','false');
    // s'assurer que l'overlay capte les événements
    lightbox.style.pointerEvents = 'auto';
    lbClose.focus();
  }

  function closeLightbox(){
    // empêcher toute réouverture pendant la transition
    suppressOpen = true;
    lightbox.classList.remove('open');
    lightbox.setAttribute('aria-hidden','true');
    // désactiver immédiatement les pointer events pour éviter que le tap ne "passe" aux miniatures dessous
    lightbox.style.pointerEvents = 'none';
    // délai légèrement supérieur à la transition CSS
    setTimeout(function(){
      document.body.style.overflow = '';
      document.documentElement.removeAttribute('data-lightbox-open');
      lbImg.src = '';
      // réactiver la possibilité d'ouvrir après courte attente
      suppressOpen = false;
      lightbox.style.pointerEvents = '';
    }, 300);
  }

  imgs.forEach(function(img){
    img.style.cursor = 'zoom-in';
    img.setAttribute('tabindex', img.getAttribute('tabindex') || '0');
    img.addEventListener('click', function(e){
      if (suppressOpen) return;
      var src = img.getAttribute('data-large') || img.src;
      openLightbox(src, img.alt || '');
    });
    img.addEventListener('keydown', function(e){
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); if (!suppressOpen) { var src = img.getAttribute('data-large') || img.src; openLightbox(src, img.alt || ''); } }
    });
  });

  // fermer en cliquant sur l'overlay (sauf si on clique sur l'image)
  lightbox.addEventListener('click', function(e){
    if (e.target === lightbox) { e.stopPropagation(); closeLightbox(); }
  });

  lbClose.addEventListener('click', function(e){ e.stopPropagation(); closeLightbox(); });

  // permettre fermeture en cliquant SUR l'image elle-même + accès clavier
  if (lbImg) {
    lbImg.setAttribute('tabindex','0'); // focusable

    lbImg.addEventListener('pointerdown', function(e){
      // priorité aux touches tactiles : empêcher propagation et fermer
      if (e.pointerType === 'touch') {
        e.preventDefault();
        e.stopPropagation();
        closeLightbox();
      }
    }, {passive:false});

    lbImg.addEventListener('click', function(e){
      // souris / fallback : empêcher propagation puis fermer
      e.preventDefault();
      e.stopPropagation();
      closeLightbox();
    });

    lbImg.addEventListener('keydown', function(e){
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); e.stopPropagation(); closeLightbox(); }
    });
  }

  // fermer avec Esc
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && lightbox.classList.contains('open')) closeLightbox();
  });

});
</script>
<script>
  document.addEventListener("DOMContentLoaded", function(){
    (function(){
      var desc = document.getElementById('gallery-desc');
      var full = document.getElementById('gallery-desc-full');
      var closeBtn = document.getElementById('gallery-desc-close');
      if (!desc || !full) return;

      // état initial
      full.style.display = full.classList.contains('open') ? 'block' : 'none';

      function ensureNavClosed() {
        var nav = document.querySelector('.nav-links');
        var menuBtn = document.getElementById('menu-toggle');
        if (nav && (nav.classList.contains('open') || nav.classList.contains('show'))) {
          nav.classList.remove('open','show');
          if (menuBtn) menuBtn.setAttribute('aria-expanded','false');
          document.body.classList.remove('menu-open');
        }
      }

      function openDesc() {
        ensureNavClosed();
        full.style.display = 'block';
        requestAnimationFrame(function(){
          full.classList.add('open');
          full.setAttribute('aria-hidden','false');
          desc.setAttribute('aria-expanded','true');
          if (closeBtn) closeBtn.focus();
        });
      }
      function closeDesc() {
        full.classList.remove('open');
        full.setAttribute('aria-hidden','true');
        desc.setAttribute('aria-expanded','false');
        setTimeout(function(){
          full.style.display = 'none';
          desc.focus();
        }, 320);
      }
      function toggleDesc(){ if (full.classList.contains('open')) closeDesc(); else openDesc(); }

      // éviter double déclenchement touch -> click : gestion via pointer events
      var suppressClick = false;
      desc.addEventListener('pointerdown', function(e){
        if (e.pointerType === 'touch') {
          e.preventDefault();
          e.stopPropagation();
          toggleDesc();
          suppressClick = true;
          setTimeout(function(){ suppressClick = false; }, 400);
        }
      }, {passive:false});

      // click pour souris / fallback
      desc.addEventListener('click', function(e){
        if (suppressClick) return;
        toggleDesc();
      });

      // clavier
      desc.addEventListener('keydown', function(e){
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleDesc(); }
      });

      if (closeBtn) {
        closeBtn.addEventListener('click', function(e){ e.stopPropagation(); closeDesc(); });
        closeBtn.addEventListener('keydown', function(e){ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); closeDesc(); } });
      }
    })();
  });
  </script>
</body>
</html>
